<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Flow Navigator</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 40px;
            max-width: 1000px;
            margin: 0 auto;
            background: #f5f5f5;
        }

        .container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1 {
            color: #2C3E50;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
        }

        .flow-section {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #2C3E50;
        }

        h2 {
            color: #2C3E50;
            font-size: 20px;
            margin-bottom: 15px;
        }

        .step {
            display: flex;
            align-items: center;
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .step-number {
            background: #2C3E50;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: #333;
        }

        .step-description {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }

        button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #2C3E50;
            color: white;
        }

        .btn-primary:hover {
            background: #1a252f;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .btn-warning {
            background: #ffc107;
            color: #333;
        }

        .btn-warning:hover {
            background: #e0a800;
        }

        .quick-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
        }

        .warning {
            background: #fff3cd;
            border: 1px solid #ffc107;
            color: #856404;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .test-accounts {
            background: #e8f4ff;
            border: 1px solid #b8e0ff;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .test-accounts h3 {
            color: #2C3E50;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .account {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
        }

        .account code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üì± Test Flow Navigator</h1>
        <p class="subtitle">Complete testing workflow for the Appointment Scheduler system</p>

        <div class="info">
            <strong>Current Status:</strong> Email confirmation is blocking the signup flow.
            Use the options below to bypass this for testing or configure your Supabase project.
        </div>

        <!-- Quick Setup for Testing -->
        <div class="flow-section">
            <h2>‚ö° Quick Setup (Recommended for Testing)</h2>

            <div class="step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <div class="step-title">Disable Email Confirmation in Supabase</div>
                    <div class="step-description">
                        Go to your Supabase Dashboard ‚Üí Authentication ‚Üí Settings ‚Üí Email Auth ‚Üí
                        Turn OFF "Enable email confirmations"
                    </div>
                    <button class="btn-warning" onclick="alert('Open your Supabase project dashboard and navigate to:\n\n1. Authentication (left sidebar)\n2. Settings tab\n3. Email Auth section\n4. Toggle OFF \"Enable email confirmations\"\n5. Save changes')">
                        üìã View Instructions
                    </button>
                </div>
            </div>

            <div class="step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <div class="step-title">Clear All Data & Start Fresh</div>
                    <div class="step-description">Remove all existing data from localStorage and Supabase to test the complete flow</div>
                    <button class="btn-danger" onclick="window.location.href='reset-all-data.html'">
                        üóëÔ∏è Reset All Data
                    </button>
                </div>
            </div>

            <div class="step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <div class="step-title">Start Testing Flow</div>
                    <div class="step-description">Begin with authentication and proceed through the entire workflow</div>
                    <button class="btn-success" onclick="window.location.href='auth-app.html'">
                        üöÄ Start Testing
                    </button>
                </div>
            </div>
        </div>

        <!-- Complete Test Flow -->
        <div class="flow-section">
            <h2>üîÑ Complete Test Flow</h2>

            <div class="step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <div class="step-title">Authentication</div>
                    <div class="step-description">Sign up for a new shop account or login with existing credentials</div>
                    <button class="btn-primary" onclick="window.location.href='auth-app.html'">
                        Open Auth App
                    </button>
                    <button class="btn-secondary" onclick="window.location.href='confirm-email-bypass.html'">
                        Email Bypass Helper
                    </button>
                </div>
            </div>

            <div class="step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <div class="step-title">Setup Wizard</div>
                    <div class="step-description">Configure shop details, services, barbers, and business hours</div>
                    <button class="btn-primary" onclick="window.location.href='setup-wizard-app.html'">
                        Open Setup Wizard
                    </button>
                </div>
            </div>

            <div class="step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <div class="step-title">Owner App</div>
                    <div class="step-description">Manage appointments, view analytics, and configure settings</div>
                    <button class="btn-primary" onclick="window.location.href='owner-app.html'">
                        Open Owner App
                    </button>
                </div>
            </div>

            <div class="step">
                <div class="step-number">4</div>
                <div class="step-content">
                    <div class="step-title">Customer App</div>
                    <div class="step-description">Book appointments as a customer</div>
                    <button class="btn-primary" onclick="window.location.href='customer-app.html'">
                        Open Customer App
                    </button>
                </div>
            </div>
        </div>

        <!-- Test Accounts -->
        <div class="test-accounts">
            <h3>üß™ Test Accounts</h3>

            <div class="account">
                <strong>Demo Account (Pre-configured):</strong><br>
                Email: <code>demo@example.com</code><br>
                Password: <code>demo123</code>
            </div>

            <div class="account">
                <strong>Quick Test Account:</strong><br>
                Email: <code>test@example.com</code><br>
                Password: <code>test123</code><br>
                <button class="btn-success" onclick="window.location.href='confirm-email-bypass.html'">
                    Create Test Account
                </button>
            </div>
        </div>

        <!-- Utilities -->
        <div class="flow-section">
            <h2>üõ†Ô∏è Testing Utilities</h2>

            <div class="quick-actions">
                <button class="btn-danger" onclick="window.location.href='reset-all-data.html'">
                    üóëÔ∏è Reset All Data
                </button>
                <button class="btn-warning" onclick="localStorage.clear(); alert('LocalStorage cleared!')">
                    üì± Clear LocalStorage
                </button>
                <button class="btn-secondary" onclick="window.location.href='confirm-email-bypass.html'">
                    ‚úâÔ∏è Email Bypass
                </button>
                <button class="btn-primary" onclick="checkStatus()">
                    üîç Check Status
                </button>
            </div>
        </div>

        <!-- Testing Checklist -->
        <div class="flow-section">
            <h2>‚úÖ Testing Checklist</h2>

            <div style="margin: 15px 0;">
                <label style="display: block; margin: 8px 0;">
                    <input type="checkbox"> Account creation works
                </label>
                <label style="display: block; margin: 8px 0;">
                    <input type="checkbox"> Setup wizard saves all data
                </label>
                <label style="display: block; margin: 8px 0;">
                    <input type="checkbox"> All 5 services appear in owner app
                </label>
                <label style="display: block; margin: 8px 0;">
                    <input type="checkbox"> Service toggles persist
                </label>
                <label style="display: block; margin: 8px 0;">
                    <input type="checkbox"> All enabled services show in customer app
                </label>
                <label style="display: block; margin: 8px 0;">
                    <input type="checkbox"> Barber-specific services work correctly
                </label>
                <label style="display: block; margin: 8px 0;">
                    <input type="checkbox"> Store hours are enforced
                </label>
                <label style="display: block; margin: 8px 0;">
                    <input type="checkbox"> Appointments can be booked
                </label>
                <label style="display: block; margin: 8px 0;">
                    <input type="checkbox"> No overlapping appointments allowed
                </label>
                <label style="display: block; margin: 8px 0;">
                    <input type="checkbox"> Calendar views work correctly
                </label>
            </div>
        </div>
    </div>

    <script>
        function checkStatus() {
            const setupComplete = localStorage.getItem('setupComplete') === 'true';
            const shopId = localStorage.getItem('supabase_shop_id');
            const authData = localStorage.getItem('sb-zpgebfbzdmahlbhjbvvk-auth-token');

            let status = 'Status Check:\n\n';
            status += `Setup Complete: ${setupComplete ? '‚úÖ Yes' : '‚ùå No'}\n`;
            status += `Shop ID: ${shopId || 'Not set'}\n`;
            status += `Authenticated: ${authData ? '‚úÖ Yes' : '‚ùå No'}\n`;
            status += `\nLocalStorage Keys: ${Object.keys(localStorage).length}\n`;

            alert(status);
        }
    </script>
</body>
</html>